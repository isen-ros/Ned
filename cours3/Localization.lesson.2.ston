SaLesson{#order:2,#units:OrderedCollection[SaMarkdownContent{#order:0,#title:'Objectives',#id:#___Objectives,#content:'#Objectifs \n\nCette lesson de notre cours cible se familiariser avec le Localisation. \nAprès cette lesson vous devez être capable de:\n\t\n\t\n- Reconnaitre qu\'est-ce que ce Localisation (sujet). \n- Avoir une nocion tres general des deux approaches plus populaires de Localisation. \n- Demarrer AMCL avec turtlebot3 \n- Demarrer la navigation avec AMCL\n\n'},SaMultipleChoiceQuestion{#order:1,#title:'Quiz #1: Localisation',#id:#WhatIsLocalization,#state:{'établir sa propre position et orientation':true},#optional:false,#question:'Qu\'est-ce que ca veut dire Localisation?',#choices:['établir sa propre position','établir sa propre position et orientation','Planification de la trajectoire'],#singleReponse:true},SaMarkdownContent{#order:2,#title:'Localization',#id:#LocalIntro,#content:'![Localisation](https://dlsdc.com/images/general/localization.jpg width=400 caption="Slam")\n\n\n\nLa localisation du robot indique la capacité du robot à établir sa propre position et orientation dans le cadre de référence. La planification de trajectoire est en fait un prolongement de la localisation, en ce sens qu\'elle nécessite la détermination de la position actuelle du robot et d\'une position de but, toutes deux dans le même cadre de référence ou les mêmes coordonnées. La construction de la carte peut prendre la forme d\'une carte métrique ou de toute notation décrivant des emplacements dans le cadre de référence du robot.\n\nPour tout appareil mobile, la capacité à naviguer dans son environnement est importante. Éviter les situations dangereuses telles que les collisions et les conditions dangereuses (température, rayonnement, exposition aux intempéries, etc.) vient en premier lieu, mais si le robot a un objectif qui concerne des endroits spécifiques de son environnement, il doit trouver ces endroits. Cet article présente une vue d\'ensemble de la compétence de navigation et tente d\'identifier les blocs de base d\'un système de navigation robotisé, les types de systèmes de navigation, et d\'examiner de plus près les éléments de construction qui y sont liés.\n\nLa navigation d\'un robot signifie la capacité du robot à déterminer sa propre position dans son cadre de référence et à planifier un chemin vers un endroit donné. Afin de naviguer dans son environnement, le robot ou tout autre dispositif de mobilité nécessite une représentation, c\'est-à-dire une carte de l\'environnement et la capacité d\'interpréter cette représentation.\n\nLa navigation peut être définie comme la combinaison des trois compétences fondamentales :\n\n- Auto-localisation\n- Planification de la trajectoire\n- Elaboration et interprétation des cartes\n\nCertains systèmes de navigation robotique utilisent la localisation et la cartographie simultanées pour générer des reconstructions en 3D de leur environnement.\n\n\n\n## Genres de localisation \n\n\nLes méthodes de localisation sont regroupées en deux catégories : Globale et Locale.\n\nGlobale :\n\n- Donner une localisation par rapport au monde\n- Souvent inexactes par rapport aux méthodes locales\n- Par exemple : GPS ou points d\'accès Wi-Fi\n\nLocal :\n\n- Donner un emplacement par rapport au retour d\'information du capteur local\n- Peut être très précis par rapport aux méthodes globales\n- Par exemple un scanner laser et des caméras embarquées\n\n\n\n\n## AMCL \n \n \nLa localisation Monte Carlo (MCL), également connue sous le nom de localisation par filtre à particules, est un algorithme de localisation par filtre à particules pour les robots. À partir d\'une carte de l\'environnement, l\'algorithme estime la position et l\'orientation d\'un robot lorsqu\'il se déplace et détecte l\'environnement. L\'algorithme utilise un filtre à particules pour représenter la distribution des états probables, chaque particule représentant un état possible, c\'est-à-dire une hypothèse de l\'endroit où se trouve le robot. L\'algorithme commence généralement par une distribution aléatoire uniforme des particules dans l\'espace de configuration, ce qui signifie que le robot n\'a aucune information sur l\'endroit où il se trouve et suppose qu\'il a la même probabilité de se trouver à n\'importe quel point de l\'espace. Chaque fois que le robot se déplace, il déplace les particules pour prédire son nouvel état après le mouvement. Chaque fois que le robot détecte quelque chose, les particules sont rééchantillonnées sur la base d\'une estimation bayésienne récursive, c\'est-à-dire de la corrélation entre les données réelles détectées et l\'état prédit. En fin de compte, les particules devraient converger vers la position réelle du robot.\n\nImaginez un robot avec une carte interne de son environnement. Lorsque le robot se déplace, il a besoin de savoir où il se trouve sur cette carte. Déterminer sa position et sa rotation (plus généralement, la pose) en utilisant les observations de ses capteurs est connu sous le nom de localisation du robot.\n\nComme le robot ne se comporte pas toujours de manière parfaitement prévisible, il génère de nombreuses suppositions aléatoires sur sa prochaine position. Ces suppositions sont connues sous le nom de particules. Chaque particule contient une description complète d\'un état futur possible. Lorsque le robot observe l\'environnement, il rejette les particules qui ne correspondent pas à cette observation, et génère d\'autres particules proches de celles qui semblent cohérentes. Au final, on peut espérer que la plupart des particules convergent vers l\'endroit où se trouve réellement le robot.\n\n![Algo](http://rmod-files.lille.inria.fr/Teach/algo-amcl.png width=400 caption="Localisation")\n\n\n\n\n\n'},SaQuestionaire{#order:3,#title:'Quiz #2: Localization ',#id:#LocalizationQuiz,#optional:false,#questions:OrderedCollection[SaOpenQuestion{#id:#LocalizationQuizQ1,#state:'Lors d\'un déplacement la position va changer par rapport à son point de départ. L\'orientation va joué un rôle dans ce changement. Preuve que la localisation utilise à la fois la position et l\'orientation',#optional:false,#question:'Pour quoi on dit que la localisation s\'agit de position et orientation?'},SaMultipleChoiceQuestion{#id:#LocalizationQuizQ4,#state:{'WiFi':true,'Localisation en rapport au monde':false},#optional:false,#question:'Les methods globales',#choices:['WiFi','Etherenet','TokenRing','Localisation en rapport au monde'],#singleReponse:false},SaMultipleChoiceQuestion{#id:#LocalizationQuizQ2,#state:{'Base sur le meme algorithme a particles du SLAM':true,'Estime la position et orientation':true},#optional:false,#question:'AMCL est un algorithme que',#choices:['Fait la fusion des données ','Estime la position et orientation','Base sur le meme algorithme a particles du SLAM'],#singleReponse:false},SaMultipleChoiceQuestion{#id:#LocalizationQuizQ5,#state:{'Lidar':true,'Localisation en rapport aux measures':true,'Camera':true,'Odometrie':true},#optional:false,#question:'Les methods locales',#choices:['Lidar','Camera','Odometrie','Localisation en rapport aux measures'],#singleReponse:false},SaMultipleChoiceQuestion{#id:#LocalizationQuizQ3,#state:{'2':true},#optional:false,#question:'Il a plusieurs genres des methodes de localisation',#choices:['2','>3','1','3'],#singleReponse:true}]},SaMarkdownContent{#order:4,#title:'AMCL: Alternative Montecarlo Location',#id:#AMCL,#content:'D\'avant commencer avec cet experiment il faut absolumnent avoir fait: \n\n1- L\'experiment SLAM\n2- Sauvegarder la carte produit par SLAM\n\n\n\n==============================================================================\n\nDans le NUC ouvrir une terminal \n\nROS offre une commande "roscd". Cette commande s\'agis d\'une version modifie du commande cd. \nroscd vas nous laisser arriver au dossier d\'un package du ros. \n\nExecute la commande\n\n```\n$ roscd turtlebot3_navigation\n````\n\nOu est-ce que vous etes positioné maintenant? (tip: commande pwd)\n\nle dossier contiens plusieurs sousdossier. Exemple: map et launch. \n\n\n```\n$ cd launch\n````\n\nOn va s\'intereser au fichier "turtlebot3_navigation.launch". \n\nIl faut donc l\'ouvrir et l\'analyser. \n\n1- trouve la ligne que configure la carte.\n2- modifie le pour utiliser la carte que vous avez generé avec l\'experiment SLAM. \n\n\n\n================================================================================\n\nDans le NUC Ouvrir une terminal et demarrer le node MASTER de ROS avec la commande \n\n```\n$ roscore\n````\n\n================================================================================\n\nOuvrir une deuxieme terminal. Connecter au robot: \n```\nssh ubuntu@{IP_VOS_ROBOT}\n```\nUne fois connecté, demarré les services de base du turtlebot\n``` \nroslaunch turtlebot3_bringup turtlebot3_robot.launch\n``` \n\n================================================================================\nDans une troisieme terminal. \nConfigurer vos model de robot. (Vous pouvez aussi ajouter ce ligne a la fin de votre .bashrc du NUC)\n\n```\n$ export TURTLEBOT3_MODEL=burger\n``` \n\n\n```\n$ roslaunch turtlebot3_navigation turtlebot3_navigation.launch\n``` \n\n\n================================================================================\n\nLa commande precedent a eu a ouvrir RVIZ (interface graphique)\n\nL\'interface RVIZ est vraiment riche. \n\nPasse de temps a regarder tout les informations pertinents.\n\n===============================================================================\n\nNotre installation robotique n\'a pas une bonne vitesse access au données. \n\n\nOuvrez deux autres nouvelles terminales. \n\nUne sur le robot\n\n```\nssh ubuntu@{IP_VOS_ROBOT}\n```\n\nEt l\'autre sur le NUC\n\n\nDans chaque une de ces terminales execute le suivant commande: \n\n\n```\ndate\n```\n\nQu\'est-ce que vous trouvez ?\n\nComment est-ce que vous pensez que cet information est lie au log d\'erreurs de la commande turtlebot3_navigation.launch?\n\n\nManuallement, en utilisent la commmande "date" (vous pouvez utiliser man date pour apprendre les detailles d\'utilisation), assurez vous que le robot et le NUC sont synchronizé au segonde. \n\n\n===============================================================================\n\nAddresse vous au package turtlebot3_navigation/params\n\net trouve le fichier qu\'a le mot "tolerance". (tip: rapellez vous du commande grep du premiere jour, sinon man grep).\n\nmodifiez tous les fichiers que disent \n\ntransform_tolerance : 0.5 \n\na\n\ntransform_tolerance : 20.5 \n\n\n\n================================================================================\n1 - Une fois fait, redemarrez la commande " turtlebot3_navigation.launch"\n\n\n2- Qu\'est-ce que vous trouvez que a changé dans l\'interface RVIZ? \n\n3- Metez le robot dans la place ou vous avez fait la carte\n\n4- En utilisent le button RVIZ "estimate pose", aide au robot a se retrouver. \n\n5- Qu\'est-ce que vous trouvez que se passe dans l\'interface RVIZ? \n\n\n================================================================================\n\nAvec le bouton "destination", demandez au robot de se balader.\n\n\n1- Qu\'est-ce que ce la relation entre la carte et le mouvement du robot? \n\n2- Qu\'est-ce que ce la costmap? \n\n3- Qu\'est-ce que ce le TF? \n\n\nAvec le bouton "destination", demandez au robot de se balader une deuxieme fois. Cet fois-ci une personne du group doit se balader pour empecher le robot de traverser.\n\n\n1- Qu\'est-ce qu\'il fait? \n2- Analysez la costmap. Qu\'est-ce que vous trouvez? \n3- Qu\'est-ce que ce passe avec la trajectoire? \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n'},SaQuestionaire{#order:5,#title:'Quiz #3: AMCL ',#id:#AMCLQuiz,#optional:false,#questions:OrderedCollection[SaOpenQuestion{#id:#AMCLQuizQ3,#state:'12',#optional:false,#question:'Quel processus sont executée dans le NUC?'},SaOpenQuestion{#id:#AMCLQuizQ2,#state:'Bringup gmapping',#optional:false,#question:'Quel processus sont executée dans le turtlebot?'},SaMultipleChoiceQuestion{#id:#AMCLQuizQ1,#state:{'5':true},#optional:false,#question:'Combien des processus sont visibles pendant le processus de AMCL',#choices:['5','>5','2'],#singleReponse:false}]},SaLessonSummary{#order:6,#title:'Summary',#id:#__Summary,#content:'#Summaire  \n\n\nvous devez être capable de:\n\t\n\t\n- Reconnaitre qu\'est-ce que ce Localisation (sujet). \n- Avoir une nocion tres general des deux approaches plus populaires de Localisation. \n- Demarrer AMCL avec turtlebot3 \n- Demarrer la navigation avec AMCL\n\n\t'}],#title:'Localization',#current:7,#submitFolder:#RosElementalConcepts,#id:#Localization}